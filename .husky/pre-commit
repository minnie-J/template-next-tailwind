#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "\n>> Pre-commit Hook: Checking branch name...\n"

# í˜„ìž¬ ì²´í¬ì•„ì›ƒëœ ë¸Œëžœì¹˜
CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD)
# ì»¤ë°‹í•˜ë©´ ì•ˆë˜ëŠ” ë¸Œëžœì¹˜
PROTECTED_BRANCHES="main dev"

echo "ë³´í˜¸ ë¸Œëžœì¹˜(ë“¤): $PROTECTED_BRANCHES"
echo "í˜„ìž¬ ë¸Œëžœì¹˜: $CURRENT_BRANCH\n"

for BRANCH in $PROTECTED_BRANCHES
do
  # í˜„ìž¬ ë¸Œëžœì¹˜ê°€ ë³´í˜¸ ë¸Œëžœì¹˜ë©´ ì»¤ë°‹ ì·¨ì†Œ ì²˜ë¦¬
  if [ "$BRANCH" = "$CURRENT_BRANCH" ]
  then
    echo "ðŸš« ë³´í˜¸ ë¸Œëžœì¹˜ì— ì§ì ‘ ì»¤ë°‹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
    echo "ðŸš« ì‹ ê·œ ë¸Œëžœì¹˜ë¥¼ ìƒì„±í•˜ì—¬ ì»¤ë°‹í•´ì£¼ì„¸ìš”!\n"
    exit 1
    break
  fi
done

echo ">> Finish checking branch name.\n"

exit 0

# npm test
npx lint-staged

